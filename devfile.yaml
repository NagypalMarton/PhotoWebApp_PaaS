schemaVersion: 2.1.0
metadata:
  name: photowebapp-paas
components:
  - name: workspace
    container:
      image: quay.io/devfile/universal-developer-image:latest
      mountSources: false
      endpoints:
        - name: http-8080
          targetPort: 8080
          exposure: public
          protocol: http
  - name: openshift-stack
    openshift:
      uri: openshift/openshift-all.yaml
commands:
  - id: build
    exec:
      component: workspace
      commandLine: echo "Devfile build step"
  - id: deploy-openshift-stack
    apply:
      component: openshift-stack
  - id: deploy
    composite:
      commands:
        - build
        - deploy-openshift-stack
      parallel: false
  - id: up
    composite:
      commands:
        - deploy
      parallel: false
